# Predator-Prey Simulation

This repository contains the source code for a C++-based predator-prey simulation, exploring evolutionary dynamics within a spatially explicit environment. The simulation models the interactions between two types of prey (one mobile, one immobile) and predators across a grid of patches with varying resource levels.

## Files Overview

* **`Organism.h`**: Defines the `Organism` base class, from which all prey and predator types inherit. It establishes core traits like `alpha` (sensitivity to environmental cues), `tau` (resource-danger trade-off), and `move_rate` (probability of movement).
* **`Prey.h`**: Defines the `Prey` class, representing the mobile prey in the simulation.
* **`Prey2.h`**: Defines the `Prey2` class, representing the immobile prey.
* **`Predator.h`**: Defines the `Predator` class, representing the predators.
* **`World.h`**: Implements the `World` class, which manages the simulation environment, including patches, organism interactions (movement, reproduction, culling), and environmental parameters.
* **`native.cpp`**: Contains the main simulation logic for running experiments, initializing the world, and collecting data in a console/native environment.
* **`web.cpp`**: Provides the logic for a web-based visualization of the simulation, utilizing the `emp::web` library.
* **`plots.ipynb`**: A Jupyter Notebook for analyzing and visualizing the simulation data, typically generated by `native.cpp`.

## Simulation Mechanics

The simulation operates on a grid of patches, each with a specific resource level. Organisms inhabit these patches and interact based on their type and traits:

* **Prey**: Seek resources and avoid predators. Mobile prey can move between patches, while immobile prey (Prey2) stay in their initial patch.
* **Predators**: Hunt prey. Their movement and reproduction are influenced by the availability of prey.

Evolutionary dynamics are introduced through:

* **Mutation**: Organism traits (`alpha`, `tau`) can mutate during reproduction.
* **Reproduction**: Organisms reproduce based on environmental conditions and their success.
* **Culling**: Organisms are removed based on death rates or if they are "dead" (though natural death is not explicitly modeled in the base `Organism::IsDead` for now, it's a placeholder for future extensions).

## How to Compile and Run (Native)

To compile and run the `native.cpp` simulation:

1.  Ensure you have a C++ compiler (e.g., g++ or clang++) and the `Empirical` library set up.
2.  Compile the source files:
    ```bash
    g++ -std=c++17 native.cpp Organism.cpp Prey.cpp Prey2.cpp Predator.cpp World.cpp -o simulation
    ```
    (Note: You might need to adjust includes and compilation flags based on your `Empirical` setup and specific file structure if Organism.cpp, Prey.cpp etc. are separate files. Assuming `.h` files are included and implementation is in .cpp files for simplicity, or directly in .h for header-only classes.)
3.  Run the simulation:
    ```bash
    ./simulation
    ```
    This will generate a CSV file (`evolution_data_deathrate_X.csv`) containing the simulation data and print progress to the console.

## How to Compile and Run (Web)

To compile and run the `web.cpp` simulation (requires Emscripten for web compilation):

1.  Ensure you have Emscripten installed and configured.
2.  Compile the source files with Emscripten:
    ```bash
    emcc -std=c++17 web.cpp World.cpp Organism.cpp Prey.cpp Prey2.cpp Predator.cpp -o index.html -s USE_SDL=2 -s WASM=1
    ```
    (Again, adjust paths and compilation flags as per your setup.)
3.  Serve the `index.html` file using a local web server (e.g., Python's `http.server`):
    ```bash
    python -m http.server
    ```
4.  Open your web browser and navigate to `http://localhost:8000` (or the port your server is running on).

## Data Analysis

The `plots.ipynb` Jupyter Notebook can be used to analyze the generated CSV data.
1.  Make sure you have Jupyter Notebook and the necessary Python libraries (pandas, numpy, matplotlib, seaborn) installed.
2.  Launch Jupyter Notebook:
    ```bash
    jupyter notebook
    ```
3.  Open `plots.ipynb` and run the cells to generate plots and insights from your simulation results.

## Contributing

Feel free to fork the repository, make improvements, and submit pull requests.TODO